% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/weight_pred_functions.R
\name{diversification_metric}
\alias{diversification_metric}
\title{This function calculates and reports the diversification of the portfolio during training,
using the Herfindahl-Hirschman Index (HHI), which is the sum of the squared portfolio weights.}
\usage{
diversification_metric()
}
\arguments{
\item{y_true}{Tensor. A matrix where each row contains \code{stock_id}, \code{date}, \code{actual_return}.}

\item{y_pred}{Tensor. Predicted portfolio weights.}
}
\value{
A scalar diversification value (HHI) for the current batch of data.
}
\description{
This function calculates and reports the diversification of the portfolio during training,
using the Herfindahl-Hirschman Index (HHI), which is the sum of the squared portfolio weights.
}
\examples{
\dontrun{
# Example: Calculate diversification metric (HHI)
#' example_data <- data.frame(
  stock_id = c(1, 1, 2, 2, 3, 3),
  date = c(1, 2, 1, 2, 1, 2),
  benchmark = rep(0,6),
  actual_return = c(0.01, 0.02, -0.01, 0.01, 0.03, -0.02)
)

# Sample predicted weights
predicted_weights <- c(0.5, 0.6, 0.3, 0.2, 0.2, 0.2)

# Convert data to TensorFlow tensors
y_true <- tf$constant(as.matrix(example_data), dtype = "float32")
y_pred <- tf$constant(predicted_weights, dtype = "float32")
diversification_value <- diversification_metric(y_true, y_pred)
print(diversification_value)
}
}
