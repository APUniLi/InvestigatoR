% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/backtesting_weights.R
\name{postprocess_weights}
\alias{postprocess_weights}
\title{Postprocess Weights (Masking and Box Constraints)}
\usage{
postprocess_weights(weight_predictions, original_data, config)
}
\arguments{
\item{weight_predictions}{Tibble. A data frame containing stock IDs, dates, and predicted weights.}

\item{original_data}{Tibble. The original data containing masking information.}

\item{config}{List. A configuration list containing the minimum and maximum weight constraints.}
}
\value{
A tibble with adjusted weights after applying the masking and box constraints.
}
\description{
This function applies the masking and box constraints (min and max weight constraints) to the predicted portfolio weights.
}
\examples{
\dontrun{
# Example data
weight_predictions <- tibble::tibble(
  stock_id = rep(1:3, each = 3),
  date = rep(seq.Date(Sys.Date(), by = "days", length.out = 3), times = 3),
  pred_weight = c(0.2, -0.5, 0.8,  # First stock, all three dates
              0.3, 0.0, 0.2,   # Second stock
              -0.6, 0.7, -0.4) # Third stock
)

original_data <- tibble::tibble(
  stock_id = rep(1:3, each = 3),
  date = rep(seq.Date(Sys.Date(), by = "days", length.out = 3), times = 3),
  mask = c(1,1,1,1,1,0,1,1,1) # 3 stocks are masked on the last day
)

# Define a model config with box constraints:
model_config <- list(
  min_weight = -0.5,
  max_weight = 0.5
)
}
}
