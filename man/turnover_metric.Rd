% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/weight_pred_functions.R
\name{turnover_metric}
\alias{turnover_metric}
\title{This function calculates and reports the portfolio turnover during training.}
\usage{
turnover_metric()
}
\arguments{
\item{y_true}{Tensor. A matrix where each row contains \code{stock_id}, \code{date}, \code{actual_return}.}

\item{y_pred}{Tensor. Predicted portfolio weights.}
}
\value{
A scalar turnover value for the current batch of data.
}
\description{
This function calculates and reports the portfolio turnover during training.
}
\examples{
\dontrun{
library(keras)
library(tensorflow)

# Example: simple portfolio with 3 stocks and 2 dates
example_data <- data.frame(
  stock_id = c(1, 1, 2, 2, 3, 3),
  date = c(1, 2, 1, 2, 1, 2),
  actual_return = c(0.01, 0.02, -0.01, 0.01, 0.03, -0.02)
)

# Sample predicted weights
predicted_weights <- c(0.5, 0.6, 0.3, 0.2, 0.2, 0.2)

# Convert data to TensorFlow tensors
y_true <- tf$constant(as.matrix(example_data), dtype = "float32")
y_pred <- tf$constant(predicted_weights, dtype = "float32")

# Call the custom turnover metric function
turnover_value <- turnover_metric(
  y_true = y_true,
  y_pred = y_pred
)

# Print the calculated turnover value
print(turnover_value)
}
}
